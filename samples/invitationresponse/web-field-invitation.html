<html>
  <head>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="scrollbar.css">
  </head>
  <body>
    <div id='main'>
      <div id='header'></div>
      <div id='note'></div>
      <div id='response'></div>
    </div>
    <script type="text/javascript">
    $(function() {

      var httpGetP = function(url, queryOrBody) {
        var df = $.Deferred();
        httpGet(url, queryOrBody, function(result) {
          df.resolve(result);
        }, function(err) {
          df.reject(result);
        });
        return df.promise();
      };

      $attach('#header', 'mkHostHeader', [
        "ECCV 2016 - Workshop Track",
        "European Conference on Computer Vision",
        "Held in Amsterdam, the Netherlands",
        "http://www.eccv2016.org/",
        "October 8-10 and 15-16, 2016"
      ], true);

      console.log('args', args);

      if (args && args.invitation) {
        httpGetP('notes', { id: args.invitation.reply.content.noteId.value }).then(function(result) {
          $attach('#note', 'mkNotePanel', [result.notes[0]], true);
        });
      }

      if (args && args.noteId) {
        httpGetP('notes', { id: args.noteId }).then(function(result) {
          var message = (result.notes[0].content.response == 'Yes') ? 'Thank you for accepting the invitation!' : 'You have declined the invitation.';
          var $response = $('#response');
          $response.append(
            $('<div>', {class: 'panel'})
            .append($('<div>', {class: 'row'}).text(message))
          );
        });
      }
    });
    </script>
 </body>
</html>
