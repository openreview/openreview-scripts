function () {
  var or3client = lib.or3client;

  var UAIData = <<uaidata.js>>

  // Create an empty group for this paper, e.g. "auai.org/UAI/2017/paper444"
  var paperGroup = {
    'id': 'auai.org/UAI/2017/Paper'+note.number,
    'signatures': ['auai.org/UAI/2017'],
    'writers': ['auai.org/UAI/2017'],
    'members': [],
    'readers': ['everyone'],
    'signatories': ['auai.org/UAI/2017', 'auai.org/UAI/2017/Paper'+note.number]
  };

  var reviewerGroup = {
    'id': paperGroup.id+'/Reviewers',
    'signatures':['auai.org/UAI/2017'],
    'writers':['auai.org/UAI/2017'],
    'members':[],
    'readers':[UAIData.COCHAIRS,UAIData.SPC,paperGroup.id+'/Reviewers'],
    'signatories':['auai.org/UAI/2017',paperGroup.id+'/Reviewers']
  };

  var reviewerNonReadersGroup = {
    'id': paperGroup.id+'/Reviewers/NonReaders',
    'signatures':['auai.org/UAI/2017'],
    'writers':['auai.org/UAI/2017'],
    'members':[],
    'readers':[UAIData.COCHAIRS,UAIData.SPC,paperGroup.id+'/Reviewers/NonReaders'],
    'signatories':['auai.org/UAI/2017',paperGroup.id+'/Reviewers/NonReaders']
  };

  var authorGroup = {
    'id':paperGroup.id+'/Authors',
    'signatures':['auai.org/UAI/2017'],
    'writers':['auai.org/UAI/2017'],
    'members': note.content.authorids,
    'readers':[UAIData.COCHAIRS],
    'signatories':['auai.org/UAI/2017',paperGroup.id+'/Authors']
  };

  var areachairGroup = {
    'id':paperGroup.id+'/Area_Chair',
    'signatures':['auai.org/UAI/2017'],
    'writers':['auai.org/UAI/2017'],
    'members':[], //member to be added later by assignment script
    'readers':[UAIData.COCHAIRS,UAIData.SPC],
    'signatories':['auai.org/UAI/2017',paperGroup.id+'/Area_Chair']
  };

  var metaReviewProcess = <<metaReviewProcess.js>>

  var metaReviewInvitation = {
    'id': 'auai.org/UAI/2017/-/Paper'+note.number+'/Meta/Review',
    'signatures': ['auai.org/UAI/2017'],
    'writers': ['auai.org/UAI/2017'],
    'invitees': ['auai.org/UAI/2017/Paper'+note.number+'/Area_Chair'],
    'noninvitees':[],
    'readers': ['auai.org/UAI/2017',UAIData.SPC,UAIData.COCHAIRS],
    'process': metaReviewProcess+'',
    'duedate': 1507180500000, //duedate is Nov 5, 2017, 17:15:00 (5:15pm) Eastern Time
    'reply': {
      'forum': note.id,
      'replyto': note.id,
      'writers': {'values-regex':'auai.org/UAI/2017/Paper'+note.number+'/Area_Chair'},
      'signatures': {'values-regex':'auai.org/UAI/2017/Paper'+note.number+'/Area_Chair'},
      'readers': {
        'values': [UAIData.COCHAIRS],
        'description': 'The users who will be allowed to read the above content.'
      },
      'content': {
        'title': {
          'order': 1,
          'value-regex': '.{1,500}',
          'description': 'Brief summary of your review.',
          'required':true
        },
        'metareview': {
          'order': 2,
          'value-regex': '[\\S\\s]{1,5000}',
          'description': 'Please provide an evaluation of the quality, clarity, originality and significance of this work, including a list of its pros and cons.',
          'required':true
        },
        'recommendation': {
          'order': 3,
          'value-dropdown': [
            'Strong accept',
            'Weak accept',
            'Reject'
          ],
          'required':true
        },
        'format': {
          'order':4,
          'value-radio': [
            'Poster',
            'Oral'
          ],
          'required':true
        },
        'best paper':{
          'order':5,
          'description': 'Nominate as best paper (if student paper, nominate for best student paper)',
          'value-radio': [
            'Yes',
            'No'
          ],
          'required':true
        }
      }
    }
  };

  var reviewProcess = <<reviewProcess.js>>

  var reviewInvitation = {
    'id': 'auai.org/UAI/2017/-/Paper'+note.number+'/Review',
    'signatures': ['auai.org/UAI/2017'],
    'writers': ['auai.org/UAI/2017'],
    'invitees': ['auai.org/UAI/2017/Paper'+note.number+'/Reviewers'],
    'noninvitees':[],
    'readers': ['everyone'],
    'process': reviewProcess+'',
    'duedate': 1507180500000, //duedate is Nov 5, 2017, 17:15:00 (5:15pm) Eastern Time
    'reply': {
      'forum': note.id,
      'replyto': note.id,
      'writers': {'values-regex':'auai.org/UAI/2017/Paper'+note.number+'/AnonReviewer[0-9]+'},
      'signatures': {'values-regex':'auai.org/UAI/2017/Paper'+note.number+'/AnonReviewer[0-9]+'},
      'readers': {
        'values': [UAIData.COCHAIRS, UAIData.SPC, reviewerGroup.id, authorGroup.id],
        'description': 'The users who will be allowed to read the above content.'
      },
      'nonreaders': {
        'values': [reviewerNonReadersGroup.id]
      },
      'content': {
        'title': {
          'order': 1,
          'value-regex': '.{1,500}',
          'description': 'Brief summary of your review.',
          'required':true
        },
        'review': {
          'order': 2,
          'value-regex': '[\\S\\s]{1,5000}',
          'description': 'Please provide an evaluation of the quality, clarity, originality and significance of this work, including a list of its pros and cons.',
          'required':true
        },
        'rating': {
          'order': 3,
          'value-dropdown': [
            '10: Top 5% of accepted papers, seminal paper',
            '9: Top 15% of accepted papers, strong accept',
            '8: Top 50% of accepted papers, clear accept',
            '7: Good paper, accept',
            '6: Marginally above acceptance threshold',
            '5: Marginally below acceptance threshold',
            '4: Ok but not good enough - rejection',
            '3: Clear rejection',
            '2: Strong rejection',
            '1: Trivial or wrong'
          ],
          'required':true
        },
        'confidence': {
          'order': 4,
          'value-radio': [
            '5: The reviewer is absolutely certain that the evaluation is correct and very familiar with the relevant literature',
            '4: The reviewer is confident but not absolutely certain that the evaluation is correct',
            '3: The reviewer is fairly confident that the evaluation is correct',
            '2: The reviewer is willing to defend the evaluation, but it is quite likely that the reviewer did not understand central parts of the paper',
            '1: The reviewer\'s evaluation is an educated guess'
          ],
          'required':true
        }
      }
    }
  };

  var commentProcess = <<commentProcess.js>>

  var confidentialGroups = [UAIData.COCHAIRS, UAIData.PC, UAIData.SPC];
  var confidentialCommentInvite = {
    'id': 'auai.org/UAI/2017/-/Paper'+note.number+'/Confidential/Comment',
    'signatures':['auai.org/UAI/2017'],
    'writers':['auai.org/UAI/2017'],
    'invitees': confidentialGroups,
    'noninvitees':[],
    'readers': ['everyone'],
    'process':commentProcess+'',
    'reply': {
      'forum': note.id,      // links this note (comment) to the previously posted note (paper)
      'signatures': {
        'values-regex': confidentialGroups.join('|'),
        'description': 'How your identity will be displayed with the above content.'
        },
      'writers': {'values-regex': confidentialGroups.join('|')},
      'readers': {
        'values': confidentialGroups,
        'description': 'The users who will be allowed to read the above content.'
        },
      'content': {
        'title': {
          'order': 1,
          'value-regex': '.{1,500}',
          'description': 'Brief summary of your comment.',
          'required':true
        },
        'comment': {
          'order': 2,
          'value-regex': '[\\S\\s]{1,5000}',
          'description': 'Your comment or reply.',
          'required':true
        }
      }
    }
  };

  var allGroups = [UAIData.COCHAIRS, UAIData.PC, UAIData.SPC, authorGroup.id];
  var openCommentInvite = {
    'id': 'auai.org/UAI/2017/-/Paper'+note.number+'/Open/Comment',
    'signatures': ['auai.org/UAI/2017'],
    'writers': ['auai.org/UAI/2017'],
    'invitees': allGroups,
    'noninvitees':[],
    'readers': ['everyone'],
    'process': commentProcess+'',
    'reply': {
      'forum': note.id,      // links this note (comment) to the previously posted note (paper)
      'signatures': {
        'values-regex': allGroups.join('|'),
        'description': 'How your identity will be displayed with the above content.'
        },
      'writers': { 'values-regex': allGroups.join('|') },
      'readers': {
        'values': allGroups,
        'description': 'The users who will be allowed to read the above content.'
      },
      'content': {
        'title': {
          'order': 1,
          'value-regex': '.{1,500}',
          'description': 'Brief summary of your comment.',
          'required':true
        },
        'comment': {
          'order': 2,
          'value-regex': '[\\S\\s]{1,5000}',
          'description': 'Your comment or reply.',
          'required':true
        }
      }
    }
  };


  var bidProcess = <<bidProcess.js>>
  var bidInvite = {
    'id': 'auai.org/UAI/2017/-/Paper'+note.number+'/Reviewer_Bid',
    'signatures':['auai.org/UAI/2017'],
    'writers':['auai.org/UAI/2017'],
    'invitees': [UAIData.PC],
    'noninvitees':[UAIData.SPC,UAIData.COCHAIRS],
    'readers': ['everyone'],
    'process':bidProcess+'',
    'reply': {
      'forum': note.id,      // links this note (comment) to the previously posted note (paper)
      'replyto': note.id,    // not specified so we can allow comments on comments
      'signatures': {
        'values-regex':'~.+',
        'description': 'How your identity will be displayed with the above content.'
        },
      'writers': {'values-regex':'~.+'},
      'readers': {
        'values': ['auai.org/UAI/2017'],
        'description': 'The users who will be allowed to read the above content.'
      },
      'content': {
        'title': {
          'order': 1,
          'value': 'UAI Reviewer bid: '+note.content.title
        },
        'preferences': {
            'order': 2,
            'value-radio': [
              'I want to review',
              'I can review',
              'I can probably review but am not an expert',
              'I cannot review'
            ],
            'required':true
        }
      }
    }
  };


  or3client.or3request(or3client.grpUrl, paperGroup, 'POST', token)
  .then(result => {
    group_promises = [
      or3client.or3request(or3client.grpUrl, reviewerGroup, 'POST', token)
      .then(result => or3client.or3request(or3client.grpUrl, reviewerNonReadersGroup, 'POST', token)),
      or3client.or3request(or3client.grpUrl, authorGroup, 'POST', token),
      or3client.or3request(or3client.grpUrl, areachairGroup, 'POST', token)
    ];

    return Promise.all(group_promises);
  })
  .then(result => {
    invitation_promises = [
      or3client.or3request(or3client.inviteUrl, metaReviewInvitation, 'POST', token),
      or3client.or3request(or3client.inviteUrl, reviewInvitation, 'POST', token),
      or3client.or3request(or3client.inviteUrl, confidentialCommentInvite, 'POST', token),
      or3client.or3request(or3client.inviteUrl, openCommentInvite, 'POST', token)
    ];

    return Promise.all(invitation_promises);
  })
  .then(result => done())
  .catch(error => done(error));

  return true;
};
